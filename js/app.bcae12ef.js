(function(e){function t(t){for(var o,s,l=t[0],i=t[1],u=t[2],d=0,m=[];d<l.length;d++)s=l[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&m.push(a[s][0]),a[s]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);c&&c(t);while(m.length)m.shift()();return n.push.apply(n,u||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],o=!0,l=1;l<r.length;l++){var i=r[l];0!==a[i]&&(o=!1)}o&&(n.splice(t--,1),e=s(s.s=r[0]))}return e}var o={},a={app:0},n=[];function s(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=o,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(r,o,function(t){return e[t]}.bind(null,o));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var c=i;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"3c7c":function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return a}));var o=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},a=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",{staticStyle:{"text-align":"center"}},[e._v(" 404 Not Found ")]),r("h1",{staticStyle:{"text-align":"center"}},[e._v(" 页面不存在 ")])])}]},"4b61":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var o=r("2b0e"),a=r("82ae"),n=r.n(a),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",[r("router-link",{attrs:{to:"/"}}),r("router-view")],1)])},l=[],i={name:"app",components:{}},u=i,c=r("2877"),d=Object(c["a"])(u,s,l,!1,null,null,null),m=d.exports,f=(r("45fc"),r("8c4f")),p=r("2f62");o["default"].use(p["a"]);var g=new p["a"].Store({state:{token:"",userName:""},mutations:{LOGIN:function(e,t){e.token=t,localStorage.token=t},addUser:function(e,t){e.userName=t,localStorage.userName=t,console.log("name:"+t)},LOGOUT:function(e){localStorage.removeItem("token"),e.token="",e.userName=""}},actions:{},modules:{}}),h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"block"},[r("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal"},on:{select:e.handleSelect}},[r("el-submenu",{attrs:{index:"1"}},[r("template",{slot:"title"},[e._v("我的信息")]),r("el-menu-item",{attrs:{index:"1-1"}},[e._v("地址管理")]),r("el-menu-item",{attrs:{index:"1-2"}},[e._v("Logout")])],2)],1),r("div",{staticClass:"block"},e._l(this.goodsLists,(function(t,o){return r("el-col",{key:o,attrs:{id:"elc"}},[r("el-card",{staticClass:"box-card"},[r("img",{staticClass:"image",attrs:{src:e.url+t.goodsCoverImg}}),r("div",[r("span",[e._v(e._s(t.goodsName))])]),r("div",[r("time",{staticClass:"time"},[e._v("价格：¥"+e._s(t.sellingPrice))])]),r("span",[e._v(e._s(t.goodsIntro))])])],1)})),1),r("div",[r("div",{staticClass:"block"},[r("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":e.currtPage,total:e.totalCount},on:{"current-change":function(t){return e.findAllPage(e.currtPage)},"update:currentPage":function(t){e.currtPage=t},"update:current-page":function(t){e.currtPage=t}}})],1)])],1)},b=[],v=(r("caad"),r("d3b7"),r("2532"),r("5c96")),F=r.n(v);r("4328");function k(e){var t=n.a.create({baseURL:"http://test11.hctwallet.com/",timeout:5e3,headers:{accept:"*/*","Content-Type":"application/json"}});return t.interceptors.request.use((function(e){return window.localStorage.token&&(e.headers["token"]=window.localStorage.token),e}),(function(e){console.log(e)})),t.interceptors.response.use((function(e){return e.data}),(function(e){if(e&&e.response)switch(e.response.status){case 400:e.message="错误请求";break;case 401:e.message="未授权，请重新登录";break;case 403:e.message="拒绝访问";break;case 404:e.message="请求错误,未找到该资源",window.location.href="/NotFound";break;case 405:e.message="请求方法未允许";break;case 408:e.message="请求超时";break;case 500:e.message="服务器端出错";break;case 501:e.message="网络未实现";break;case 502:e.message="网络错误";break;case 503:e.message="服务不可用";break;case 504:e.message="网络超时";break;case 505:e.message="http版本不支持该请求";break;default:e.message="连接错误".concat(e.response.status)}else JSON.stringify(e).includes("timeout")&&v["Message"].error("服务器响应超时，请刷新当前页"),e.message="连接服务器失败";return v["Message"].error(e.message),Promise.resolve(e.response)})),t(e)}function w(){return k({method:"post",url:"/api/v3/user/logout",data:{token:window.localStorage.token}})}var N={name:"Home",data:function(){return{goodsLists:[],totalCount:1,pageIndex:1,pageSize:10,currtPage:1,url:"http://test11.hctwallet.com/"}},components:{},created:function(){console.log("created"),console.log("home token"+g.state.token),this.findAllPage()},methods:{findAllPage:function(e){var t=this;e&&(this.currtPage=e),n.a.defaults.headers.common["token"]=window.localStorage.token,console.log(window.localStorage.token),n.a.get("http://test11.hctwallet.com/api/v3/search?keyword=%E6%89%8B%E6%9C%BA&pageNumber="+this.currtPage).then((function(e){t.goodsLists=e.data.data.list,t.totalCount=e.data.data.totalCount,t.pageIndex=e.data.data.pageIndex,t.currtPage=e.data.data.currPage,console.log(e.data.data.currPage)}))},handleSelect:function(e){if("1-1"==e){var t=decodeURIComponent(this.$route.query.redirect||"/Address");this.$router.push({path:t})}else if("1-2"==e){w(),g.commit("LOGOUT"),console.log("logout");var r=decodeURIComponent(this.$route.query.redirect||"/login");this.$router.push({path:r})}}}},y=N,x=(r("cccb"),Object(c["a"])(y,h,b,!1,null,null,null)),_=x.exports,P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"账号",prop:"account"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm.account,callback:function(t){e.$set(e.ruleForm,"account",t)},expression:"ruleForm.account"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"pass"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登录")]),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)},S=[];function $(e,t){return k({url:"/api/v3/user/login",method:"post",data:{loginName:e,passwordMd5:t}})}var A={data:function(){var e=this,t=function(t,r,o){""===r?o(new Error("请输入密码")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),o())},r=function(t,r,o){""===r?o(new Error("请输入账号")):(""!==e.ruleForm.checkAcc&&e.$refs.ruleForm.validateField("checkAcc"),o())};return{ruleForm:{account:"",pass:""},rules:{pass:[{validator:t,trigger:"blur"}],account:[{validator:r,trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;$(t.ruleForm.account,t.md5password).then((function(e){if("SUCCESS"==e.message){t.$store.commit("LOGIN",e.data),t.$store.commit("addUser",t.ruleForm.account),console.log("login token"+g.state.token),console.log("user:"+t.ruleForm.account);var r=decodeURIComponent(t.$route.query.redirect||"/home");t.$router.push({path:r})}else alert("账号或密码错误，请重试")}),(function(e){console.log("faild")}))}))},resetForm:function(e){this.$refs[e].resetFields()}},computed:{md5password:function(){var e=this.ruleForm.pass,t=r("8237"),o=t(e);return o}}},I=A,C=(r("d93e"),Object(c["a"])(I,P,S,!1,null,"73688b90",null)),O=C.exports,T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[r("el-table-column",{attrs:{prop:"addressId",label:"编号",width:"180"}}),r("el-table-column",{attrs:{prop:"regionName",label:"用户",width:"180"}}),r("el-table-column",{attrs:{prop:"userName",label:"姓名",width:"180"}}),r("el-table-column",{attrs:{prop:"userPhone",label:"电话号码",width:"180"}}),r("el-table-column",{attrs:{prop:"provinceName",label:"省份"}}),r("el-table-column",{attrs:{prop:"cityName",label:"城市"}}),r("el-table-column",{attrs:{prop:"detailAddress",label:"地址"}}),r("el-table-column",{directives:[{name:"show",rawName:"v-show",value:e.tableData.defaultFlag?1:0,expression:" tableData.defaultFlag?1:0 "}],attrs:{prop:"defaultFlag",label:"默认地址"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.deleteAddresss(t.$index,t.row)}}},[e._v("删除")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.getaddressInfo(t.$index,t.row)}}},[e._v("详情")])]}}])})],1),r("el-button",{attrs:{plain:""},on:{click:function(t){return e.back()}}},[e._v("返回")]),r("el-button",{attrs:{plain:""},on:{click:function(t){return e.add()}}},[e._v("添加")]),r("el-dialog",{attrs:{title:e.dialogTitle,width:"50%",visible:e.iconFormVisible},on:{"update:visible":function(t){e.iconFormVisible=t}}},[r("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.ruleForm,rules:e.rules}},[r("el-form-item",{attrs:{label:"姓名",prop:"userName"}},[r("el-input",{model:{value:e.ruleForm.userName,callback:function(t){e.$set(e.ruleForm,"userName",t)},expression:"ruleForm.userName"}})],1),r("el-form-item",{attrs:{label:"电话号码",prop:"userPhone"}},[r("el-input",{model:{value:e.ruleForm.userPhone,callback:function(t){e.$set(e.ruleForm,"userPhone",t)},expression:"ruleForm.userPhone"}})],1),r("el-form-item",{attrs:{label:"省份",prop:"provinceName"}},[r("el-input",{model:{value:e.ruleForm.provinceName,callback:function(t){e.$set(e.ruleForm,"provinceName",t)},expression:"ruleForm.provinceName"}})],1),r("el-form-item",{attrs:{label:"城市",prop:"cityName"}},[r("el-input",{model:{value:e.ruleForm.cityName,callback:function(t){e.$set(e.ruleForm,"cityName",t)},expression:"ruleForm.cityName"}})],1),r("el-form-item",{attrs:{label:"是否默认地址",prop:"defaultFlag"}},[r("el-switch",{model:{value:e.ruleForm.defaultFlag,callback:function(t){e.$set(e.ruleForm,"defaultFlag",t)},expression:"ruleForm.defaultFlag"}})],1),r("el-form-item",{attrs:{label:"详细地址",prop:"detailAddress"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.detailAddress,callback:function(t){e.$set(e.ruleForm,"detailAddress",t)},expression:"ruleForm.detailAddress"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.iconFormVisible=!1}}},[e._v("取 消")]),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重 置")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},E=[];r("a434");function j(){return k({url:"/api/v3/address",params:{token:window.localStorage.token}})}function q(e){console.log("post"+g.state.userName);var t={cityName:e.cityName,defaultFlag:e.defaultFlag?1:0,detailAddress:e.detailAddress,provinceName:e.provinceName,regionName:localStorage.userName,userName:e.userName,userPhone:e.userPhone};return k({url:"/api/v3/address",method:"post",data:t})}function L(e){return console.log(e.defaultFlag?1:0),k({url:"/api/v3/address",method:"put",data:{addressId:e.addressId,cityName:e.cityName,defaultFlag:e.defaultFlag?1:0,detailAddress:e.detailAddress,provinceName:e.provinceName,regionName:localStorage.userName,userName:e.userName,userPhone:e.userPhone}})}function U(e){return k({url:"/api/v3/address/"+e})}function D(e){return console.log("id: "+e),k({url:"/api/v3/address/"+e,method:"delete"})}var V={data:function(){return{iconFormVisible:!1,dialogTitle:"添加",rowIndex:null,tableData:[],ruleForm:{addressId:"",regionName:"",userName:"",userPhone:"",provinceName:"",detailAddress:"",defaultFlag:!1,cityName:""},rules:{userName:[{required:!0,message:"请输入姓名",trigger:"blur"}],userPhone:[{required:!0,message:"请输入号码",trigger:"blur"}],provinceName:[{required:!0,message:"请输入省份",trigger:"blur"}],detailAddress:[{required:!0,message:"请输入详细地址",trigger:"blur"}],cityName:[{required:!0,message:"请输入城市",trigger:"blur"}]}}},created:function(){this.getAddresss()},methods:{add:function(){this.dialogTitle="添加",this.userInfo={},this.iconFormVisible=!0},handleEdit:function(e,t){this.dialogTitle="编辑",this.iconFormVisible=!0,console.log(t),this.ruleForm=t,this.rowIndex=e},getAddresss:function(){var e=this;j().then((function(t){console.log(t.data),e.tableData=t.data}))},postAddresss:function(e){var t=this;console.log(e.userName),q(e).then((function(r){if(console.log(r.message),"SUCCESS"==r.message){var o=t.tableData,a=o[0].addressId;console.log(t.tableData),e.regionName=localStorage.userName,e.addressId=a+1,o.unshift(e),t.tableData=o,console.log(t.tableData),console.log(o),t.iconFormVisible=!1}}))},putAddresss:function(e){L(e).then((function(e){console.log("Put message: "+e.message)}))},deleteAddresss:function(e,t){var r=this;this.$confirm("确定删除".concat(t.addressId,"吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then((function(){D(t.addressId).then((function(e){console.log(e.message),"SUCCESS"==e.message&&r.tableData.splice("row.addressId",1)}))}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;console.log(t.dialogTitle),"添加"==t.dialogTitle?(t.postAddresss(t.ruleForm),t.ruleForm={},console.log("add"+t.ruleForm)):"编辑"==t.dialogTitle?(t.putAddresss(t.ruleForm),console.log(t.ruleForm),t.iconFormVisible=!1):"详情"==t.dialogTitle&&(t.iconFormVisible=!1)}))},resetForm:function(e){this.$refs[e].resetFields()},back:function(){this.$router.go(-1)},getaddressInfo:function(e,t){var r=this;console.log(t.addressId),this.dialogTitle="详情",U(t.addressId).then((function(e){r.ruleForm=e.data,r.iconFormVisible=!0}))}}},M=V,z=(r("5a59"),Object(c["a"])(M,T,E,!1,null,"4d48d2ac",null)),G=z.exports,B=r("6d64");o["default"].use(f["a"]);var R=[{path:"/",redirect:"/login",name:"MyLogin"},{path:"/home",name:"Home",meta:{requireAuth:!0},component:_},{path:"/login",name:"Login",component:O},{path:"/address",name:"Address",meta:{requireAuth:!0},component:G},{path:"*",name:"404",component:B["default"]}],J=new f["a"]({mode:"history",base:"",routes:R});window.localStorage.getItem("token")&&g.commit("LOGIN",window.localStorage.getItem("token")),J.beforeEach((function(e,t,r){e.matched.some((function(e){return e.meta.requireAuth}))?g.state.token?r():r({path:"/login",query:{redirect:e.fullPath}}):r()}));var H=J;r("0fae");o["default"].use(F.a),o["default"].config.productionTip=!1,new o["default"]({router:H,store:g,render:function(e){return e(m)}}).$mount("#app")},"5a59":function(e,t,r){"use strict";var o=r("da77"),a=r.n(o);a.a},"5ced":function(e,t,r){},"6d64":function(e,t,r){"use strict";var o=r("3c7c"),a=r("71ca"),n=r("2877"),s=Object(n["a"])(a["default"],o["a"],o["b"],!1,null,null,null);t["default"]=s.exports},"71ca":function(e,t,r){"use strict";var o=r("8250"),a=r.n(o);t["default"]=a.a},8250:function(e,t){},cccb:function(e,t,r){"use strict";var o=r("5ced"),a=r.n(o);a.a},d93e:function(e,t,r){"use strict";var o=r("4b61"),a=r.n(o);a.a},da77:function(e,t,r){}});
//# sourceMappingURL=app.bcae12ef.js.map